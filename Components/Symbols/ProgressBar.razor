@using TestBlazor.Components.Symbols
@using TestBlazor.Components.Symbols.Generics

<SymbolWrapper IsSelected="IsSelected" IsEnabled="IsEnabled" HasCommLoss="HasCommLoss" HasCrossFilter="HasCrossFilter"
               Width="Width" Height="Height" Rotation="Rotation" MirrorX="MirrorX" MirrorY="MirrorY"
               OverlayContent="OverlayContent" OnClick="OnClick" OnSettingsClick="OnSettingsClick">
    <div class="progress-container">
        <div class="progress-bar" style="height: @Value%; background-color: @Color;"></div>
        <div class="progress-value">@Value%</div>
    </div>
</SymbolWrapper>

<style>
    .progress-container {
        width: 100%;
        height: 100%;
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        border-radius: 4px;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column-reverse; /* Fill from bottom */
    }

    .progress-bar {
        width: 100%;
        transition: height 0.3s ease;
    }

    .progress-value {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-weight: bold;
        color: black;
        text-shadow: 0 0 2px white;
        pointer-events: none;
    }
</style>

@code {
    [Parameter] public double Value { get; set; } = 0; // 0 to 100
    [Parameter] public string Color { get; set; } = "#007bff";
    
    // Wrapped Params
    [Parameter] public bool IsSelected { get; set; }
    [Parameter] public bool IsEnabled { get; set; } = true;
    [Parameter] public bool HasCommLoss { get; set; }
    [Parameter] public bool HasCrossFilter { get; set; }
    
    [Parameter] public int Width { get; set; } = 50;
    [Parameter] public int Height { get; set; } = 150;
    [Parameter] public int Rotation { get; set; } = 0;
    [Parameter] public bool MirrorX { get; set; }
    [Parameter] public bool MirrorY { get; set; }

    [Parameter] public EventCallback<MouseEventArgs> OnClick { get; set; }
    [Parameter] public EventCallback OnSettingsClick { get; set; }
    [Parameter] public RenderFragment? OverlayContent { get; set; }
}
